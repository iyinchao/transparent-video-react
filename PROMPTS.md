# transparent-video-react

This is the repo for a transparent video react component. Transparent video is based on Jake Archibald's research: [article](https://jakearchibald.com/2024/video-with-transparency/), and [repo](https://github.com/jakearchibald/transparent-video).

He used stacked video generated by FFMPEG to create transparent video. Which non-transparent video is stacked on top of the alpha channel video. Then he use `<canvas>` (WebGL shader) to composite the two videos.
I'm going to use this technique to create a react component that can be used to play transparent video.

## Technical details

- adopt Jake Archibald's code in the repo above, to this repo.
- use react to create the component

### react component api

```tsx
<TransparentVideo {/* api same as video tag e.g. */} autoPlay loop>
    <TransparentVideo.Source src="video.mp4" type="video/mp4" />
    <TransparentVideo.Source
      src="av1.mp4"
      type="video/mp4; codecs=av01.0.08M.08.0.110.01.01.01.1"
    />
    <TransparentVideo.Source src="hevc.mp4" type="video/mp4; codecs=hvc1.1.6.H120.b0" />
</TransparentVideo>
```

The `<TransparentVideo>` is the main component, it's api is much like `<video>`. And it have `useImperativeHandle` to expose the video element & canvas element to the outside, and apis like `play`, `pause`, `seekTo` etc.

The `<TransparentVideo.Source>` is used to provide multiple video sources, same as `<video><source /></video>`.

## Develop experience

- pnpm to manage dependencies
- jest to test code
- eslint to lint code
- prettier to format code
- editorconfig to keep code style consistent
- typescript
- react
- storybook to preview component, use vite builder
- vite to build component
- commitlint to keep commit message consistent
- conventional changelog to generate changelog
- release using tool that support semantic release
- github actions to automate ci/cd

## License

MIT
